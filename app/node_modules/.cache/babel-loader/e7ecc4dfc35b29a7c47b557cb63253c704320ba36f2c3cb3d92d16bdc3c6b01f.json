{"ast":null,"code":"import axios from 'axios';\nimport { saveAs } from 'file-saver';\nimport { useNavigate } from 'react-router-dom';\nconst backendPort = process.env.BACK_PORT || 9000;\nexport const handleLogin = (event, onSuccess) => {\n  event.preventDefault();\n  const data = Object.fromEntries(new FormData(event.target).entries());\n  axios.get(`http://localhost:${backendPort}/getUser`, {\n    params: data\n  }).then(res => {\n    if (res.data) {\n      alert('Logged in');\n      localStorage.clear();\n      localStorage.setItem('loggedInUser', res.data._id);\n      onSuccess();\n    } else alert('Wrong credentials');\n  }).catch(err => {\n    console.log(err);\n    alert('Error in Login');\n  });\n};\nexport const handleSignUp = (event, onSuccess) => {\n  event.preventDefault();\n  const data = Object.fromEntries(new FormData(event.target).entries());\n  axios.post(`http://localhost:${backendPort}/createUser`, data).then(res => onSuccess()).catch(err => {\n    console.log(err);\n    alert('Error in Sign Up');\n  });\n};\nexport const handleSignOut = (event, redirect) => {\n  event.preventDefault();\n  localStorage.clear();\n  if (typeof redirect === 'function') redirect();\n};\nexport const handleUpload = async (file, uploader_id) => {\n  const data = new FormData();\n  data.append('file', file);\n  try {\n    const res = await axios.post(`http://localhost:${backendPort}/uploadFile/${uploader_id}`, data, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    console.log(res);\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    alert('Error in uploading file');\n  }\n};\nexport const handleDownload = (file_id, file_name, user_id) => {\n  axios.get(`http://localhost:${backendPort}/getFileData/${file_id}/${user_id}`, {\n    responseType: 'blob'\n  }).then(res => {\n    console.log(res);\n    saveAs(res.data, file_name);\n  }).catch(err => {\n    console.log(err);\n    alert('Error in downloading file');\n  });\n};\nexport const handleCreateTags = async (tagPairs, author_id) => {\n  if (!tagPairs.length) return [];\n  const bulk = tagPairs.length > 1;\n  const endpoint = `http://localhost:${backendPort}/createTag`;\n  const data = new FormData();\n  if (!bulk) {\n    data.append('author_id', author_id);\n    data.append('name', tagPairs[0].tag.name);\n    tagPairs[0].tag.description && data.append('description', tagPairs[0].tag.description);\n  } else data.append('tags', JSON.stringify(tagPairs.map(tagPair => ({\n    ...tagPair.tag,\n    author_id: author_id\n  }))));\n  try {\n    const res = await axios.post(endpoint, data);\n    console.log(res.data);\n    return tagPairs.map(tagPair => ({\n      tag: bulk ? res.data[tagPair.tag.name] : res.data,\n      value: tagPair.value\n    }));\n  } catch (err) {\n    console.log(err);\n    alert('Error in creating tag');\n  }\n};\nexport const handleAttachTags = (tagPairs, file_id) => {\n  if (!tagPairs.length) return;\n  const data = new FormData();\n  if (tagPairs.length > 1) data.append('taggings', JSON.stringify(tagPairs.map(pair => ({\n    tag_id: pair.tag._id,\n    value: pair.value || ``,\n    file_id: file_id\n  }))));else {\n    data.append('tag_id', tagPairs[0].tag._id);\n    data.append('value', tagPairs[0].value || ``);\n    data.append('file_id', file_id);\n  }\n  axios.post(`http://localhost:${backendPort}/tagFile`, data).then(res => {\n    console.log(res);\n    alert('Tags attached to file');\n  }).catch(err => {\n    console.log(err);\n    alert('Error in attaching tags');\n  });\n};\nexport const handleGetTag = async query => {\n  try {\n    const res = await axios.get(`http://localhost:${backendPort}/getTag`, {\n      params: query\n    });\n    console.log(res);\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    alert('Error in getting tags');\n  }\n};\nexport const handleGetTags = async query => {\n  try {\n    const res = await axios.get(`http://localhost:${backendPort}/getTags`, {\n      params: query\n    });\n    console.log(res);\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    alert('Error in getting tags');\n  }\n};\nexport const handleUpdateTransactions = async query => {\n  try {\n    const res = await axios.get(`http://localhost:${backendPort}/getTransactions`, {\n      params: query\n    });\n    console.log(res);\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    alert('Error in getting transactions');\n  }\n};","map":{"version":3,"names":["axios","saveAs","useNavigate","backendPort","process","env","BACK_PORT","handleLogin","event","onSuccess","preventDefault","data","Object","fromEntries","FormData","target","entries","get","params","then","res","alert","localStorage","clear","setItem","_id","catch","err","console","log","handleSignUp","post","handleSignOut","redirect","handleUpload","file","uploader_id","append","headers","handleDownload","file_id","file_name","user_id","responseType","handleCreateTags","tagPairs","author_id","length","bulk","endpoint","tag","name","description","JSON","stringify","map","tagPair","value","handleAttachTags","pair","tag_id","handleGetTag","query","handleGetTags","handleUpdateTransactions"],"sources":["/Users/dubemeneh/data-gg/app/src/handles.js"],"sourcesContent":["import axios from 'axios';\nimport { saveAs } from 'file-saver';\nimport { useNavigate } from 'react-router-dom';\n\nconst backendPort = process.env.BACK_PORT || 9000;\n\nexport const handleLogin = (event, onSuccess) => {\n  event.preventDefault();\n  const data = Object.fromEntries(new FormData(event.target).entries());\n  axios.get(`http://localhost:${backendPort}/getUser`, {params: data})\n    .then((res) => {\n      if(res.data){\n        alert('Logged in');\n        localStorage.clear();\n        localStorage.setItem('loggedInUser', res.data._id);\n        onSuccess();\n      }\n      else\n        alert('Wrong credentials');\n    })\n    .catch((err) => {\n      console.log(err);\n      alert('Error in Login');\n    });\n};\n\nexport const handleSignUp = (event, onSuccess) => {\n  event.preventDefault();\n  const data = Object.fromEntries(new FormData(event.target).entries());\n  axios.post(`http://localhost:${backendPort}/createUser`, data)\n    .then((res) => onSuccess())\n    .catch((err) => {\n      console.log(err);\n      alert('Error in Sign Up');\n    });\n};\n\nexport const handleSignOut = (event, redirect) => {\n    event.preventDefault();\n    localStorage.clear();\n    if(typeof redirect === 'function')\n      redirect();\n  };\n\nexport const handleUpload = async (file, uploader_id) => {\n  const data = new FormData();\n  data.append('file', file);\n  \n  try {\n    const res = await axios.post(`http://localhost:${backendPort}/uploadFile/${uploader_id}`, data, {\n      headers: {'Content-Type': 'multipart/form-data'}\n    });\n    console.log(res);\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    alert('Error in uploading file');\n  }\n\n};\n\nexport const handleDownload = (file_id, file_name, user_id) => {\n  axios.get(`http://localhost:${backendPort}/getFileData/${file_id}/${user_id}`, { responseType: 'blob' })\n    .then((res) => {\n      console.log(res);\n      saveAs(res.data, file_name)\n    })\n    .catch((err) => {\n      console.log(err);\n      alert('Error in downloading file');\n    });\n}\n\nexport const handleCreateTags = async (tagPairs, author_id) => {\n  if (!tagPairs.length)\n    return []\n\n  const bulk = tagPairs.length > 1\n  const endpoint = `http://localhost:${backendPort}/createTag`\n  const data = new FormData()\n  if (!bulk){\n    data.append('author_id', author_id)\n    data.append('name', tagPairs[0].tag.name)\n    tagPairs[0].tag.description && data.append('description', tagPairs[0].tag.description)\n  } else \n    data.append('tags', JSON.stringify(tagPairs.map(tagPair => ({...tagPair.tag, author_id: author_id}) )))\n  try {\n    const res = await axios.post(endpoint, data)\n    console.log(res.data)\n    return tagPairs.map(tagPair => ({ tag: bulk ? res.data[tagPair.tag.name] : res.data, value: tagPair.value }))\n    \n  } catch (err) {\n    console.log(err)\n    alert('Error in creating tag')\n  }   \n}\n\nexport const handleAttachTags = (tagPairs, file_id) => {\n  if (!tagPairs.length)\n    return\n  const data = new FormData()\n\n  if (tagPairs.length > 1)\n    data.append('taggings', JSON.stringify(tagPairs.map(pair => ({ tag_id: pair.tag._id, value: pair.value || ``, file_id: file_id}) )))\n  else {\n    data.append('tag_id', tagPairs[0].tag._id)\n    data.append('value', tagPairs[0].value || ``)\n    data.append('file_id', file_id)\n  }\n  axios.post(`http://localhost:${backendPort}/tagFile`, data)\n    .then((res) => {\n      console.log(res)\n      alert('Tags attached to file')\n    })\n    .catch((err) => {\n      console.log(err)\n      alert('Error in attaching tags')\n    })\n}\n\nexport const handleGetTag = async (query) => {\n  try {\n    const res = await axios.get(`http://localhost:${backendPort}/getTag`, {params: query});\n    console.log(res);\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    alert('Error in getting tags');\n  }\n}\n\nexport const handleGetTags = async (query) => {\n  try {\n    const res = await axios.get(`http://localhost:${backendPort}/getTags`, {params: query});\n    console.log(res);\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    alert('Error in getting tags');\n  }\n}\n\nexport const handleUpdateTransactions = async (query) => {\n  try {\n    const res = await axios.get(`http://localhost:${backendPort}/getTransactions`, {params: query});\n    console.log(res);\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    alert('Error in getting transactions');\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}